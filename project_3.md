


### 目前进度：
* 模型构成 = 趋势（分段logistic） + 月/季度周期 + 假期因素 + *外部变量*  
* *三科总续报率拟合与异常判定* + *外部5个变量（主要渠道、城市等级，级别、年龄级别匹配、购课方式占比）*  
* *待确定：预测准确度与异常检测是否需要两套参数，如果用于异常检测的参数过于复杂，则可能失去检测意义*  
    * *过拟合：预测不准*  
    * *预测太准：不报异常*  
* *异常返回*：  
    * *异常返回输出excel*  
    * *异常返回格式修改*  

### 模型设置：
* **趋势项：**    
    * logistic growth   
    * 最低值和最高值的设定：历史最低值打5折/100%  
    * 关键时间点确定：英语s1 2020/9 + 自动选取的增长率改变节点
* **季节项：**  
    * 加入月/季度周期  
* **节假日项：**  
    * 手动输入：元旦/春节/国庆/五一/端午/清明/寒暑假
* **外部变量：**  
    * 主要渠道、城市等级，级别、年龄级别匹配、购课方式占比
* **城市类型分四类：** 一线/新一线/二线/三线以下  
* **模型评价指标：** 暂定RMSE（占比、续报率数值较小，所以暂时不用MAPE相关指标）

### 指标异常判断标准  
* 真实值是否在模型预期（置信区间）之外 或 真实值与趋势的偏离程度 
    * 调整置信区间大小的方法：  
        * 改变模型复杂度: 调整相关的先验概率参数。
        * 改变置信区间参数: 调整interval_width
        * 占比高的特征可根据权重设置较窄的区间
* 异常返回：
    * 异常期数/续报率真实值/续报率预测值/续报率置信区间/正负影响/占比同样/真实值总贡献/模型预测值总贡献/异常贡献
* 判断标准需用业务认知进行矫正  

### 后续优化方向  
* 根据异常贡献大小输出排名以获得对异常贡献最大的单维因素 ✔️ 
* 整期预测 + 外部5个维度（渠道、城市等级，级别、年龄级别匹配、购课方式等）——> 证明模型可信度高 ✔️
* 异常看板：输出excel  ✔️  
* 进入参数精修阶段
* 迁移到jupyterhub服务器，可先用24号开课日做测试


```python














```
